(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78ff3658"],{"05c0":function(t,e,i){t.exports=i.p+"static/img/esp32.ad398494.jpg"},"32d1":function(t,e,i){t.exports=i.p+"static/img/product.22ba6f31.jpg"},"6bd6":function(t,e,i){t.exports=i.p+"static/img/raspberry.ff3a74da.jpg"},"85c5":function(t,e,i){t.exports=i.p+"static/img/esp8266.4dff6d56.jpg"},9153:function(t,e,i){t.exports=i.p+"static/img/computer.53fe4554.jpg"},"98bc":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{padding:"6px"}},[r("el-card",{staticStyle:{"margin-bottom":"6px"}},[r("el-form",{ref:"queryForm",staticStyle:{"margin-bottom":"-20px"},attrs:{model:t.queryParams,inline:!0,"label-width":"68px"}},[r("el-form-item",{attrs:{label:"产品名称",prop:"productName"}},[r("el-input",{attrs:{placeholder:"请输入产品名称",clearable:"",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleQuery(e)}},model:{value:t.queryParams.productName,callback:function(e){t.$set(t.queryParams,"productName",e)},expression:"queryParams.productName"}})],1),r("el-form-item",{attrs:{label:"分类名称",prop:"categoryName"}},[r("el-input",{attrs:{placeholder:"请输入产品分类名称",clearable:"",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleQuery(e)}},model:{value:t.queryParams.categoryName,callback:function(e){t.$set(t.queryParams,"categoryName",e)},expression:"queryParams.categoryName"}})],1),r("el-form-item",{attrs:{label:"状态",prop:"status"}},[r("el-select",{attrs:{placeholder:"请选择状态",clearable:"",size:"small"},model:{value:t.queryParams.status,callback:function(e){t.$set(t.queryParams,"status",e)},expression:"queryParams.status"}},t._l(t.dict.type.iot_product_status,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:t.handleQuery}},[t._v("搜索")]),r("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:t.resetQuery}},[t._v("重置")])],1),r("el-form-item",{staticStyle:{float:"right"}},[r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["iot:product:add"],expression:"['iot:product:add']"}],attrs:{type:"primary",plain:"",icon:"el-icon-plus",size:"mini"},on:{click:function(e){return t.handleEditProduct(0)}}},[t._v("新增")])],1)],1)],1),r("el-card",{staticStyle:{"padding-bottom":"100px"}},[r("el-row",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{gutter:30}},t._l(t.productList,(function(e,a){return r("el-col",{key:a,staticStyle:{"margin-bottom":"30px","text-align":"center"},attrs:{xs:24,sm:12,md:12,lg:8,xl:6}},[r("el-card",{attrs:{"body-style":{padding:"20px"},shadow:"always"}},[r("el-row",{attrs:{type:"flex",gutter:10,justify:"space-between"}},[r("el-col",{staticStyle:{"text-align":"left"},attrs:{span:20}},[r("el-link",{staticStyle:{"font-weight":"bold","font-size":"16px","line-height":"32px"},attrs:{type:"",underline:!1},on:{click:function(i){return t.handleEditProduct(e)}}},[r("svg-icon",{attrs:{"icon-class":"product"}}),t._v(" "+t._s(e.productName)+" "),1==e.isSys?r("el-tag",{staticStyle:{"margin-left":"5px","font-weight":"200"},attrs:{type:"info",size:"mini"}},[t._v("系统")]):t._e()],1)],1),r("el-col",{attrs:{span:4}},[2==e.status?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"取消发布",placement:"top-start"}},[r("el-button",{staticStyle:{padding:"5px"},attrs:{type:"success",size:"mini"},on:{click:function(i){return t.changeProductStatus(e.productId,1)}}},[t._v("已发布")])],1):t._e(),1==e.status?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"现在发布",placement:"top-start"}},[r("el-button",{staticStyle:{padding:"5px"},attrs:{type:"info",size:"mini"},on:{click:function(i){return t.changeProductStatus(e.productId,2)}}},[t._v("未发布")])],1):t._e()],1)],1),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:14}},[r("el-descriptions",{staticStyle:{"margin-top":"10px"},attrs:{column:1,size:"small"}},[r("el-descriptions-item",{attrs:{label:"所属分类"}},[r("el-link",{attrs:{type:"primary",underline:!1}},[t._v(t._s(e.categoryName))])],1),r("el-descriptions-item",{attrs:{label:"产品类型"}},[r("dict-tag",{attrs:{options:t.dict.type.iot_device_type,value:e.deviceType}})],1),r("el-descriptions-item",{attrs:{label:"联网方式"}},[r("dict-tag",{attrs:{options:t.dict.type.iot_network_method,value:e.networkMethod}})],1),r("el-descriptions-item",{attrs:{label:"创建时间"}},[r("span",[t._v(t._s(t.parseTime(e.createTime,"{y}-{m}-{d}")))])])],1)],1),r("el-col",{attrs:{span:10}},[r("div",{staticStyle:{"margin-top":"10px"}},[null!=e.imgUrl&&""!=e.imgUrl?r("el-image",{staticStyle:{width:"100%",height:"100px",border:"1px solid #ccc","border-radius":"5px"},attrs:{lazy:"","preview-src-list":[t.baseUrl+e.imgUrl],src:t.baseUrl+e.imgUrl,fit:"cover"}}):-1!=e.productName.indexOf("ESP8266")?r("el-image",{staticStyle:{width:"100%",height:"100px",border:"1px solid #ccc","border-radius":"5px"},attrs:{"preview-src-list":[i("85c5")],src:i("85c5"),fit:"cover"}}):-1!=e.productName.indexOf("ESP32")?r("el-image",{staticStyle:{width:"100%",height:"100px",border:"1px solid #ccc","border-radius":"5px"},attrs:{"preview-src-list":[i("05c0")],src:i("05c0"),fit:"cover"}}):-1!=e.productName.indexOf("Raspberry")?r("el-image",{staticStyle:{width:"100%",height:"100px",border:"1px solid #ccc","border-radius":"5px"},attrs:{"preview-src-list":[i("6bd6")],src:i("6bd6"),fit:"cover"}}):-1!=e.productName.indexOf("Phone")?r("el-image",{staticStyle:{width:"100%",height:"100px",border:"1px solid #ccc","border-radius":"5px"},attrs:{"preview-src-list":[i("cc78")],src:i("cc78"),fit:"cover"}}):-1!=e.productName.indexOf("Computer")?r("el-image",{staticStyle:{width:"100%",height:"100px",border:"1px solid #ccc","border-radius":"5px"},attrs:{"preview-src-list":[i("9153")],src:i("9153"),fit:"cover"}}):r("el-image",{staticStyle:{width:"100%",height:"100px",border:"1px solid #ccc","border-radius":"5px"},attrs:{"preview-src-list":[i("32d1")],src:i("32d1"),fit:"cover"}})],1)])],1),r("el-button-group",{staticStyle:{"margin-top":"15px"}},[r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["iot:product:edit"],expression:"['iot:product:edit']"}],attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(i){return t.handleEditProduct(e)}}},[t._v("详情")]),1==e.status?r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["iot:product:remove"],expression:"['iot:product:remove']"}],attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(i){return t.handleDelete(e)}}},[t._v("删除")]):t._e(),2==e.status?r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["iot:product:edit"],expression:"['iot:product:edit']"}],attrs:{size:"mini",type:"info",icon:"el-icon-download"},on:{click:function(i){return t.handleGeneratorSDK(e)}}},[t._v("下载SDK")]):t._e(),r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["tool:gen:edit"],expression:"['tool:gen:edit']"}],attrs:{size:"mini",type:"warning",icon:"el-icon-search"},on:{click:function(i){return t.handleViewDevice(e.productId)}}},[t._v("查看设备")])],1)],1)],1)})),1),r("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.queryParams.pageNum,limit:t.queryParams.pageSize},on:{"update:page":function(e){return t.$set(t.queryParams,"pageNum",e)},"update:limit":function(e){return t.$set(t.queryParams,"pageSize",e)},pagination:t.getList}}),r("el-dialog",{attrs:{title:t.title,visible:t.open,width:"500px","append-to-body":""},on:{"update:visible":function(e){t.open=e}}},[r("el-link",{staticStyle:{"padding-left":"10px"},attrs:{type:"danger",underline:!1}},[t._v("该功能暂未实现，参考教程和项目的SDK示例")]),r("el-form",{attrs:{"label-width":"80px"}},[r("el-form-item",{attrs:{label:"选择设备"}},[r("el-radio-group",{model:{value:t.form.datatype,callback:function(e){t.$set(t.form,"datatype",e)},expression:"form.datatype"}},t._l(t.dict.type.iot_device_chip,(function(e){return r("el-radio",{key:e.value,staticStyle:{"margin-top":"15px",width:"160px"},attrs:{label:e.value}},[t._v(t._s(e.label))])})),1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",disabled:""},on:{click:t.downloadSdk}},[t._v("下 载")]),r("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1)],1)],1)},a=[],o=(i("a9e3"),i("b0c0"),i("9b9c")),n={name:"Product",dicts:["iot_yes_no","iot_product_status","iot_device_type","iot_network_method","iot_vertificate_method","iot_device_chip"],data:function(){return{loading:!0,total:0,productList:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:10,productName:null,categoryId:null,categoryName:null,tenantId:null,tenantName:null,isSys:null,status:null,deviceType:null,networkMethod:null},form:{},baseUrl:"/prod-api"}},created:function(){this.getList()},activated:function(){var t=this.$route.query.t;null!=t&&t!=this.uniqueId&&(this.uniqueId=t,this.queryParams.pageNum=Number(this.$route.query.pageNum),this.getList())},methods:{getList:function(){var t=this;this.loading=!0,-1===this.$store.state.user.roles.indexOf("admin")&&(this.queryParams.tenantName=this.$store.state.user.name),Object(o["e"])(this.queryParams).then((function(e){t.productList=e.rows,t.total=e.total,t.loading=!1}))},changeProductStatus:function(t,e){var i=this,r="发生错误了";2==e?r="产品发布后不能再更改产品内容和对应物模型 ！":1==e&&(r="产品下不能有已经创建的设备，才能取消发布哦 ！"),this.$confirm(r,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var r={};r.productId=t,r.status=e,Object(o["b"])(r).then((function(t){i.getList(),i.$modal.alertSuccess(t.msg)})).catch((function(){}))})).catch((function(){}))},handleViewDevice:function(t){this.$router.push({path:"/iot/device",query:{t:Date.now(),productId:t}})},cancel:function(){this.open=!1,this.reset()},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleGeneratorSDK:function(t){this.title="生成SDK",this.open=!0},downloadSdk:function(){this.$download.zip("/iot/tool/genSdk?deviceChip=1","wumeismart-sdk")},handleDelete:function(t){var e=this,i=t.productId||this.ids,r="";this.$modal.confirm('是否确认删除产品编号为"'+i+'"的数据项？').then((function(){return Object(o["c"])(i).then((function(t){r=t.msg}))})).then((function(){e.getList(),e.$modal.msgSuccess(r)})).catch((function(){}))},handleEditProduct:function(t){var e=0;0!=t&&(e=t.productId||this.ids),this.$router.push({path:"/iot/product-edit",query:{productId:e,pageNum:this.queryParams.pageNum}})}}},s=n,c=i("2877"),l=Object(c["a"])(s,r,a,!1,null,null,null);e["default"]=l.exports},"9b9c":function(t,e,i){"use strict";i.d(e,"e",(function(){return a})),i.d(e,"f",(function(){return o})),i.d(e,"d",(function(){return n})),i.d(e,"a",(function(){return s})),i.d(e,"g",(function(){return c})),i.d(e,"b",(function(){return l})),i.d(e,"c",(function(){return u}));var r=i("b775");function a(t){return Object(r["a"])({url:"/iot/product/list",method:"get",params:t})}function o(){return Object(r["a"])({url:"/iot/product/shortList",method:"get"})}function n(t){return Object(r["a"])({url:"/iot/product/"+t,method:"get"})}function s(t){return Object(r["a"])({url:"/iot/product",method:"post",data:t})}function c(t){return Object(r["a"])({url:"/iot/product",method:"put",data:t})}function l(t){return Object(r["a"])({url:"/iot/product/status/",method:"put",data:t})}function u(t){return Object(r["a"])({url:"/iot/product/"+t,method:"delete"})}},cc78:function(t,e,i){t.exports=i.p+"static/img/telphone.adff42d3.jpg"}}]);